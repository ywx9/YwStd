/// \file csetjmp
/// \copyright (c) 2022 ywx9.com

#pragma once

#if ywstd_is_exported
extern "C" {
struct alignas(16) SETJMP_FLOAT128 {
  unsigned long long Part[2];
};
struct _JUMP_BUFFER {
  unsigned long long Frame;
  unsigned long long Rbx;
  unsigned long long Rsp;
  unsigned long long Rbp;
  unsigned long long Rsi;
  unsigned long long Rdi;
  unsigned long long R12;
  unsigned long long R13;
  unsigned long long R14;
  unsigned long long R15;
  unsigned long long Rip;
  unsigned long MxCsr;
  unsigned short FpCsr;
  unsigned short Spare;
  SETJMP_FLOAT128 Xmm6;
  SETJMP_FLOAT128 Xmm7;
  SETJMP_FLOAT128 Xmm8;
  SETJMP_FLOAT128 Xmm9;
  SETJMP_FLOAT128 Xmm10;
  SETJMP_FLOAT128 Xmm11;
  SETJMP_FLOAT128 Xmm12;
  SETJMP_FLOAT128 Xmm13;
  SETJMP_FLOAT128 Xmm14;
  SETJMP_FLOAT128 Xmm15;
};

using jmp_buf = SETJMP_FLOAT128[16];
int __cdecl _setjmp(jmp_buf);
#define setjmp _setjmp

[[noreturn]] void __cdecl longjmp(jmp_buf, int) noexcept(false);
}
#endif

namespace std {

export using ::jmp_buf;

export using ::longjmp;

using ::setjmp;
}
